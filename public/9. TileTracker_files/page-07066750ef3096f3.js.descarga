(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4092:(e,t,a)=>{"use strict";a.d(t,{TileTrackerClient:()=>eo});var r=a(5155),s=a(2115),n=a(4253),l=a(2085),i=a(9434);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,m=d?n.DX:"button";return(0,r.jsx)(m,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button";var c=a(5863);let m=s.forwardRef((e,t)=>{let{className:a,value:s,...n}=e;return(0,r.jsx)(c.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,r.jsx)(c.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});m.displayName=c.bL.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});u.displayName="Card",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});f.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";var p=a(4607),x=a(7607),g=a(8271),h=a(7223),b=a(2177),v=a(221),j=a(5594),N=a(5668),y=a(5318);let w=N.bL;N.l9;let S=N.ZL;N.bm;let C=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});C.displayName=N.hJ.displayName;let A=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(C,{}),(0,r.jsxs)(N.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.jsxs)(N.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(y.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});A.displayName=N.UC.displayName;let k=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};k.displayName="DialogHeader";let T=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};T.displayName="DialogFooter";let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});R.displayName=N.hE.displayName;let E=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});E.displayName=N.VY.displayName;var M=a(5936),O=a(154);let I=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.bL,{className:(0,i.cn)("grid gap-2",a),...s,ref:t})});I.displayName=M.bL.displayName;let P=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M.q7,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,r.jsx)(M.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(O.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});P.displayName=M.q7.displayName;var _=a(968);let D=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(_.b,{ref:t,className:(0,i.cn)(D(),a),...s})});F.displayName=_.b.displayName;let z=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});z.displayName="Input";let L=b.Op,G=s.createContext({}),V=e=>{let{...t}=e;return(0,r.jsx)(G.Provider,{value:{name:t.name},children:(0,r.jsx)(b.xI,{...t})})},X=()=>{let e=s.useContext(G),t=s.useContext(q),{getFieldState:a,formState:r}=(0,b.xW)(),n=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},q=s.createContext({}),U=s.forwardRef((e,t)=>{let{className:a,...n}=e,l=s.useId();return(0,r.jsx)(q.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",a),...n})})});U.displayName="FormItem";let H=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:n,formItemId:l}=X();return(0,r.jsx)(F,{ref:t,className:(0,i.cn)(n&&"text-destructive",a),htmlFor:l,...s})});H.displayName="FormLabel";let J=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:o}=X();return(0,r.jsx)(n.DX,{ref:t,id:l,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...a})});J.displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:n}=X();return(0,r.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let Y=s.forwardRef((e,t)=>{var a;let{className:s,children:n,...l}=e,{error:o,formMessageId:d}=X(),c=o?String(null!=(a=null==o?void 0:o.message)?a:""):n;return c?(0,r.jsx)("p",{ref:t,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...l,children:c}):null});Y.displayName="FormMessage";var $=a(7481),B=a(172);let Q=[1e4,25e3,5e4,75e3],W=j.z.object({prompt:j.z.string().min(10,{message:"Por favor describe tu meta en al menos 10 caracteres."})});function Z(e){let{isOpen:t,onOpenChange:a,currentGoal:n,onSetGoal:l}=e,[i,o]=(0,s.useState)(n),[c,m]=(0,s.useState)(!1),{toast:u}=(0,$.dj)(),f=(0,b.mN)({resolver:(0,v.u)(W),defaultValues:{prompt:""}});async function p(e){m(!0);try{let t=await fetch("/api/recommend-goal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e.prompt})});if(!t.ok)throw Error("Error de red: ".concat(t.status));let a=await t.json();if(a&&a.recommendedGoal)o(a.recommendedGoal),u({title:"\xa1Recomendaci\xf3n Lista!",description:"Te recomendamos una meta de ".concat(a.recommendedGoal.toLocaleString(),".")});else throw Error("La respuesta de la API no tuvo el formato esperado.")}catch(e){console.error("Error en onSubmit:",e),u({variant:"destructive",title:"\xa1Oh no! Algo sali\xf3 mal.",description:"Hubo un problema con tu solicitud. Revisa tu conexi\xf3n a internet."})}finally{m(!1)}}return(0,r.jsx)(w,{open:t,onOpenChange:a,children:(0,r.jsxs)(A,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(k,{children:[(0,r.jsx)(R,{children:"Establece tu Meta de Ahorro"}),(0,r.jsx)(E,{children:"Elige una meta predefinida u obt\xe9n una recomendaci\xf3n por IA."})]}),(0,r.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,r.jsx)(I,{value:String(i),onValueChange:e=>o(Number(e)),className:"grid grid-cols-2 gap-4",children:Q.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)(P,{value:String(e),id:"r".concat(e),className:"peer sr-only"}),(0,r.jsx)(F,{htmlFor:"r".concat(e),className:"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:e.toLocaleString()})]},e))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"O obt\xe9n una recomendaci\xf3n"})})]}),(0,r.jsx)(L,{...f,children:(0,r.jsxs)("form",{onSubmit:f.handleSubmit(p),className:"space-y-4",children:[(0,r.jsx)(V,{control:f.control,name:"prompt",render:e=>{let{field:t}=e;return(0,r.jsxs)(U,{children:[(0,r.jsx)(H,{children:"\xbfPara qu\xe9 est\xe1s ahorrando?"}),(0,r.jsx)(J,{children:(0,r.jsx)(z,{placeholder:"Ej. Una nueva PC para gaming",...t})}),(0,r.jsx)(Y,{})]})}}),(0,r.jsxs)(d,{type:"submit",disabled:c,className:"w-full",children:[c&&(0,r.jsx)(B.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Recomendar una Meta"]})]})})]}),(0,r.jsxs)(T,{children:[(0,r.jsx)(d,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),(0,r.jsx)(d,{onClick:()=>{l(i),a(!1),u({title:"\xa1Meta Actualizada!",description:"Tu nueva meta de ahorro es ".concat(i.toLocaleString(),".")})},children:"Guardar cambios"})]})]})})}var K=a(965),ee=a(3158);a(3561);let et=e=>{let{className:t,...a}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,i.cn)("mx-auto flex w-full justify-center",t),...a})};et.displayName="Pagination";let ea=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("ul",{ref:t,className:(0,i.cn)("flex flex-row items-center gap-1",a),...s})});ea.displayName="PaginationContent";let er=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("li",{ref:t,className:(0,i.cn)("",a),...s})});er.displayName="PaginationItem";let es=e=>{let{className:t,isActive:a,size:s="icon",...n}=e;return(0,r.jsx)("a",{"aria-current":a?"page":void 0,className:(0,i.cn)(o({variant:a?"outline":"ghost",size:s}),t),...n})};es.displayName="PaginationLink";let en=e=>{let{className:t,...a}=e;return(0,r.jsxs)(es,{"aria-label":"Go to previous page",size:"default",className:(0,i.cn)("gap-1 pl-2.5",t),...a,children:[(0,r.jsx)(K.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Anterior"})]})};en.displayName="PaginationPrevious";let el=e=>{let{className:t,...a}=e;return(0,r.jsxs)(es,{"aria-label":"Go to next page",size:"default",className:(0,i.cn)("gap-1 pr-2.5",t),...a,children:[(0,r.jsx)("span",{children:"Siguiente"}),(0,r.jsx)(ee.A,{className:"h-4 w-4"})]})};el.displayName="PaginationNext";let ei=[500,200,100,50,20,10];function eo(){let[e,t]=(0,s.useState)(1e4),[a,n]=(0,s.useState)([]),[l,o]=(0,s.useState)(()=>new Set),[c,b]=(0,s.useState)(!0),[v,j]=(0,s.useState)(!1),[N,y]=(0,s.useState)(1),w=(0,s.useCallback)(()=>{if(e<=0)return void n([]);let t=e,a=[],r=ei.flatMap(e=>Array(Math.ceil(500/(2*e))).fill(e));for(;t>0;){let e,s=r.filter(e=>e<=t);if(s.length>0){let t=Math.floor(Math.random()*s.length);e=s[t]}else{let r=ei.filter(e=>e<=t);if(r.length>0)e=r[0];else{t>0&&a.push({value:t,completed:!1});break}}a.push({value:e,completed:!1}),t-=e}for(let e=a.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}n(a.map((e,t)=>({...e,id:t})))},[e]);(0,s.useEffect)(()=>{w(),o(new Set),y(1)},[e,w]);let S=(0,s.useMemo)(()=>Array.from(l).reduce((e,t)=>{let r=a.find(e=>e.id===t);return e+(r?r.value:0)},0),[l,a]),C=(0,s.useMemo)(()=>e>0?S/e*100:0,[S,e]),A=e=>{o(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},k=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e),T=Math.ceil(a.length/100),R=a.slice((N-1)*100,100*N),E=e=>{e>=1&&e<=T&&y(e)};return(0,r.jsxs)("div",{className:"container mx-auto p-4 flex flex-col gap-8 w-full max-w-7xl",children:[(0,r.jsxs)("header",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold font-headline text-primary-foreground",children:"TileTracker"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d,{variant:"ghost",size:"icon",onClick:()=>b(!c),"aria-label":"Toggle progress bar visibility",children:c?(0,r.jsx)(p.A,{}):(0,r.jsx)(x.A,{})}),(0,r.jsx)(d,{variant:"ghost",size:"icon",onClick:()=>j(!0),"aria-label":"Open settings",children:(0,r.jsx)(g.A,{})})]})]}),c&&(0,r.jsx)(u,{className:"bg-card/80 backdrop-blur-sm border-border shadow-lg shadow-primary/5 transition-all duration-300 animate-in fade-in-0 zoom-in-95",children:(0,r.jsxs)(f,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Progreso"}),(0,r.jsx)("span",{className:"text-3xl font-bold text-primary-foreground",children:k(S)})]}),(0,r.jsxs)("span",{className:"text-lg font-semibold text-muted-foreground",children:["Meta: ",k(e)]})]}),(0,r.jsx)(m,{value:C,className:"h-4"}),(0,r.jsxs)("div",{className:"text-right mt-2 text-sm text-accent font-semibold",children:[Math.min(100,C).toFixed(2),"%"]})]})}),(0,r.jsx)("main",{children:(0,r.jsx)("div",{className:"grid grid-cols-5 md:grid-cols-10 lg:grid-cols-10 gap-2",children:R.map(e=>(0,r.jsx)(u,{onClick:()=>A(e.id),className:(0,i.cn)("group aspect-square flex flex-col justify-center items-center text-center p-2 cursor-pointer transition-all duration-300 ease-in-out bg-card/50 hover:bg-primary/80 hover:scale-105 active:scale-95 hover:shadow-lg hover:shadow-primary/20 border-border",l.has(e.id)&&"bg-primary text-primary-foreground"),role:"button","aria-label":"A\xf1adir ".concat(e.value," al total"),"aria-pressed":l.has(e.id),children:(0,r.jsxs)("div",{className:(0,i.cn)("text-xl font-bold text-accent transition-colors duration-300 group-hover:text-primary-foreground",l.has(e.id)&&"text-primary-foreground"),children:["$",e.value]})},e.id))})}),T>1&&(0,r.jsx)(et,{children:(0,r.jsxs)(ea,{children:[(0,r.jsx)(er,{children:(0,r.jsx)(en,{href:"#",onClick:e=>{e.preventDefault(),E(N-1)},disabled:1===N})}),(0,r.jsx)(er,{children:(0,r.jsxs)(es,{isActive:!0,children:["P\xe1gina ",N," de ",T]})}),(0,r.jsx)(er,{children:(0,r.jsx)(el,{href:"#",onClick:e=>{e.preventDefault(),E(N+1)},disabled:N===T})})]})}),(0,r.jsx)("footer",{className:"flex justify-center items-center gap-4 mt-8",children:(0,r.jsxs)(d,{onClick:()=>{o(new Set)},variant:"destructive",className:"bg-destructive/80 hover:bg-destructive",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Resetear Progreso"]})}),(0,r.jsx)(Z,{isOpen:v,onOpenChange:j,currentGoal:e,onSetGoal:e=>{t(e),o(new Set),y(1)}})]})}},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var r=a(2115);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},9700:(e,t,a)=>{Promise.resolve().then(a.bind(a,4092))}},e=>{var t=t=>e(e.s=t);e.O(0,[222,561,441,684,358],()=>t(9700)),_N_E=e.O()}]);